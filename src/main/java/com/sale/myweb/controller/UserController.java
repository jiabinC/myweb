package com.sale.myweb.controller;import com.sale.myweb.entity.Users;import com.sale.myweb.services.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.ModelAttribute;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;@Controllerpublic class UserController {    private final UserService userService;    @Autowired    public UserController(UserService userService) {        this.userService = userService;    }    @GetMapping("/index")    public String index() {        return "index";    }    @GetMapping("/register")    public String registerGet() {        return "register";    }    @PostMapping("/register")    public String registerPost(@ModelAttribute Users users,Model model,HttpServletResponse response) {        String result = userService.userRegister(users);        model.addAttribute("registerResult",result);        if (result.equals("注册成功")) {            return response.encodeRedirectURL("/index");        }        else {            return response.encodeRedirectURL("/register");        }    }    @GetMapping("/login")    public String loginGet() {        return "login";    }        @ResponseBody    @PostMapping("/login")    public String loginPost(Model model, @ModelAttribute Users users, HttpSession session, HttpServletResponse response) {        String result = userService.userLogin(users);        if (result.equals("登陆成功")) {            session.setAttribute("user",users);        }        model.addAttribute("result",result);        return result;    }    @GetMapping("/loginOut")    public String loginOut(HttpSession session) {        session.removeAttribute("user");        return "index";    }}